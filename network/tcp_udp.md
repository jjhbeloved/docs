# Transport Layer

## TCP协议下socket有可能丢包吗

[TCP 协议下 socket 有可能丢包吗？](https://www.zhihu.com/question/53960871)

> TCP 协议保证数据 **有序** 且 **连续**, 这里可能有三次握手 ack 这类的问题

TCP不关心本地send（）给自己的内容是啥（反正都是字节），只关心**时序(同步握手里有对方的ISN[Initial Sequence Number])**，先发给自己的肯定先编号，后发的后编号，**TCP本身只保证传输的顺序, 根据ISN将接到的数据按照字节排序好放入buffer**，至于在服务器端本地、客户端本地的顺序则由Receive（）/ Send（）时序来保证

不管你是一次提交100个字节还是100000个字节，**TCP保证按发送方的原始顺序把数据传输给接收方**；但并不保证按你提交时对数据的分割方式传输——你可能先收到第1个字节，然后再收到接下来的99999字节；也可能会先收到前99999字节，然后再读到最后的1个字节。

1. TCP是有缓冲区(基于`字节流`), UDP面向报文段是没有缓冲区的(基于`报文`)
2. TCP发送报文时，是将应用层数据写入TCP缓冲区中，然后由TCP协议来控制发送这里面的数据，而发送的状态是按字节流的方式发送的，跟应用层写下来的报文长度没有任何关系，所以说是流
3. UDP，它没有缓冲区，应用层写的报文数据会**直接加包头(带有数据大小)**交给网络层，由网络层负责分片，所以是面向报文段的
