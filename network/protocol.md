# Protocol

## HTTP

超文本协议, 数据作为**文件**做处理

在TCP**一个通道**上传输命令和数据

点播使用

## RTSP 实时流协议

流媒体协议, 一般需要2-3个通道，**命令**和**数据**通道**分离**

一般传输的是ts,mp4格式的流

直播使用

> RTSP是一个**流媒体表示协议**，主要用来**控制**具有实时特性的数据发送，但它本身并不传输数据，而是必须依赖于下层传输协议所提供的某些服务。RTSP可以对流媒体提供诸如`播放、暂 停、快进`等操作，它负责定义具体的控制消息、操作方法、状态码等，此外还描述了与RTP间的交互操作（RFC2326）

## RTMP

流媒体协议, 在TCP**一个通道**上传输命令和数据.

一般传输的是flv, f4v格式流

视频会议

## RTCP 控制协议

RTCP控制协议需要与RTP数据协议一起配合使用，当应用程序启动一个RTP会话时将同时占用**两个端口**，分别供RTP和RTCP使用。

RTP本身并 不能为按序传输数据包提供可靠的保证，也不提供流量控制和拥塞控制，这些都由RTCP来负责完成。

通常RTCP会采用与RTP相同的分发机制，向会话中的 所有成员**周期性**地发送控制信息，应用程序通过接收这些数据，从中获取会话参与者的相关资料，以及网络状况、分组丢失概率等反馈信息，从而能够对服务质量进 行控制或者对网络状况进行诊断。

RTCP协议的功能是通过不同的**RTCP数据包**来实现:

1. **SR**：发送端报告，所谓发送端是指发出RTP数据报的应用程序或者终端，发送端同时也可以是接收端。(SERVER定时间发送给CLIENT)。
2. **RR**：接收端报告，所谓接收端是指仅接收但不发送RTP数据报的应用程序或者终端。(SERVER接收CLIENT端发送过来的响应)。
3. **SDES**：源描述，主要功能是作为会话成员有关标识信息的载体，如用户名、邮件地址、电话号码等，此外还具有向会话成员传达会话控制信息的功能。
4. **BYE**：通知离开，主要功能是指示某一个或者几个源不再有效，即通知会话中的其他成员自己将退出会话。
5. **APP**：由应用程序自己定义，解决了RTCP的扩展性问题，并且为协议的实现者提供了很大的灵活性。

## RTP 数据协议

RTP数据协议负责对流媒体数据进行封包并实现媒体流的实时传输，每一个RTP数据报都由**头部（Header）**和**负载（Payload）**两个部分组成，其中头部前12个字节的含义是固定的，而负载则可以是音频或者视频数据

RTP用到的地方就是 PLAY ，服务器往客户端传输数据用UDP协议，`RTP`是在**传输数据的前面**加了个`12字节的头`(描述信息)

RTP载荷封装设计本文的网络传输是基于IP协议，所以**最大传输单元(MTU)**最大为`1500字节`，在使用IP／UDP／RTP的协议层次结构的时候，这 其中包括至少`20字节的IP头`，`8字节的UDP头`，以及`12字节的RTP头`。这样，头信息至少要占用40个字节，那么RTP载荷的最大尺寸为1460字 节。以`H264` 为例，如果一帧数据**大于1460**，则需要**分片打包**，然后到**接收端再拆包**，**组合成一帧数据**，进行**解码播放**